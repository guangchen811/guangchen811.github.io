---
title: "Go Modules Reference中文翻译"
date: 2022-09-03T16:20:27+08:00
draft: False
summary: No.2
ismath: true
tags:
- go
categories:
- go
---
[source](https://go.dev/ref/mod#vcs-find)
## 介绍
模块是Go语言管理依赖的方式. 

这篇文档详细地说明了Go语言的模块系统. 关于如何创建Go项目，可以参看[如何写Go语言程序](https://go.dev/doc/code.html). 关于使用模块、将项目迁移到模块，和其他相关的话题，请参看从[使用Go模块](https://blog.golang.org/using-go-modules)开始的系列博客.
## 模块、包和版本
模块是统一发布、版本控制和分发的包的集合. 我们可以直接从版本控制仓库中下载模块，也可以从一些模块代理服务器下载.

一个模块可以由go.mod文件中标明的[模块路径](https://go.dev/ref/mod#glos-module-path)来识别. 除模块路径外，go.mod 文件中还包含了模块间依赖的信息.模块的根目录为包含go.mod文件的路径. 主模块是指包含go命令被调用的目录的模块.

模块中的每一个包是指在相同路径下、一同被编译的源文件的集合. 一个包路径是由模块路径和包含包的子目录(指从模块根目录出发的相对路径)拼接而成的. 例如，模块"golang.org/x/net"的"html"路径中包含的包的路径为"golang.org/x/net/html".

### 模块路径
模块路径是指一个模块的标准名称，他会在go.mod文件中使用mod指令声明. 如上文所述，模块路径是模块内包路径的前缀. 

一个模块路径既要指明模块的功能，也要指明我们可以在哪里找到它。一般来说，模块路径会包含仓库根路径、仓库中文件夹的路径(一般为空，这是仓库的根目录就是模块的根路径)，以及一个主版本号后缀(只针对主版本号大于等于2时)。

- 仓库根路径是模块路径中对应版本控制仓库根路径的部分. 大多数模块都定义在其仓库的根路径上。例如仓库根路径`golang.org/x/net`就是与其同名的模块的根路径。关于go命令如何使用HTTP协议从模块中定位一个仓库请参阅[从模块路径中找到仓库](https://go.dev/ref/mod#vcs-find). 
- 如果模块没有被定义在仓库的根目录，模块子目录就是模块名称中指明模块在仓库中地址的部分。模块子目录也可以作为前缀指明版本，如模块`golang.org/x/tools/gopls`就是根路径为`golang.org/x/tools/gopls`的仓库中的`gopls`子目录。参看，[将版本映射为提交](https://go.dev/ref/mod#vcs-version)和[仓库中的模块路径](https://go.dev/ref/mod#vcs-dir).
- 在发布主版本号大于等于2的模块时，模块路径必须以[主版本后缀](https://go.dev/ref/mod#major-version-suffixes)，如`/v2`结尾。他也可以作为子目录的一部分。例如，路径为`golang.org/x/repo/sub/v2`的模块可能在仓库`golang.org/x/repo`的`/sub`路径中，也可能在`/sub/v2`路径中.

如果一个模块可能被其他模块依赖，我们只有在遵守上述规则的情况下，go命令才能正确的找到并下载该模块。此外，模块路径中的字符还有一些[词法限制](https://go.dev/ref/mod#go-mod-file-ident)。

### 版本(version)
版本号表明了模块的一个不可变快照，它可以是发布版或预发布版。每个版本都以字母
v开头，随后是可读的版本信息。有关如何格式化、解释和比较版本的详细信息，请参阅[语义版本 2.0.0](https://semver.org/spec/v2.0.0.html)

总的来说，一个语义版本包含三个由`.`分割的非负整数(从左到右分别标识主要版本号、次要版本号和布丁版本号). 补丁版本后面可以跟一个以连字符开头的可选预发布字符串。 预发布字符串或补丁版本后面可以跟以加号开头的构建元数据字符串。 例如，v0.0.0、v1.12.134、v8.0.5-pre 和 v2.0.9+meta 都是有效版本。

版本的每个部分都表示版本是否稳定以及是否与以前的版本兼容。